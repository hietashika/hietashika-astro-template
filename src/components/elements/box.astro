---
import { getPaddingClasses, type PaddingValue } from "@utils/spacing";

interface Props {
  Element?: keyof HTMLElementTagNameMap;
  padding?: PaddingValue;
  surface?: "primary" | "secondary" | "tertiary" | "quaternary" | "accent";
}

const {
  Element = "div",
  padding,
  surface = "primary",
  ...rest
}: Props = Astro.props;

const classList = [
  "box",
  // surfaceのクラスを追加
  `surface--${surface}`,
  // paddingのクラスを追加
  ...(padding ? getPaddingClasses(padding) : []),
];
---

<Element class:list={classList} {...rest}>
  <slot />
</Element>

<style lang="scss">
  @include element-base("box") {
    padding: var(--padding-top, 0) var(--padding-right, 0)
      var(--padding-bottom, 0) var(--padding-left, 0);
    background-color: var(--background, transparent);
    color: var(--color-high, inherit);
    outline: 0.125rem solid transparent;
    outline-offset: -0.125rem;

    > :global(*) {
      color: inherit;
    }
  }

  .surface {
    &--primary {
      --background: var(--color-background-primary);
    }

    &--secondary {
      --background: var(--color-background-secondary);
    }

    &--tertiary {
      --background: var(--color-background-tertiary);
    }

    &--quaternary {
      --background: var(--color-background-quaternary);
    }

    &--accent {
      --background: var(--color-background-accent);
      --color-text-high: var(--color-text-primary);
    }
  }

  // パディングユーティリティを生成
  @include generate-padding-utilities;
</style>
